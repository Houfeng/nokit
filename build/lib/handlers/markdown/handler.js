/*csd*/var markdown=require("./markdown");var fs=require("fs");var Handler=module.exports=function(b){var a=this;a.server=b;a.configs=a.server.configs;};Handler.prototype.handleRequest=function(a,b){var c=this;fs.exists(a.physicalPath,function(d){if(d){fs.readFile(a.physicalPath,function(g,f){if(g){c.server.responseError(a,b,g);}else{var i=c.readStyle();var e=markdown.toHTML(f.toString());var h='<html>\r\n<head>\r\n<title>Markdown Preview</title>\r\n<meta charset="UTF-8"/>\r\n<style>\r\n'+i+"\r\n</style>\r\n</head>\r\n<body>\r\n"+e+"\r\n</body>\r\n</html>";c.server.responseContent(a,b,h,c.configs.mimeType[".html"]);}});}else{c.server.responseNotFound(a,b);}});};Handler.prototype.readStyle=function(){var a=this;if(a.styleCache){return styleCache;}var b=__dirname+"/markdown/markdown.css";if(fs.existsSync(b)){a.styleCache=fs.readFileSync(b);}return a.styleCache;};