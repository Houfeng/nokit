/*csd*/var utils=require("./utils");var console=require("./console");function Cookie(a){var b=this;b.options=a||{};b.options.content=(b.options.content||"").trim();b.response=b.options.response;b.cookieTable={};if(b.options.content){utils.each(b.options.content.split(";"),function(e,d){if(!utils.contains(d,"=")){return;}var c=d.split("=");var f=c[0].trim();var g=c[1].trim();b.cookieTable[f]={"value":g,"options":{}};});}}Cookie.prototype.add=function(a,d,b){var c=this;if(c.response==null){console.error("非 response.cookie 对象不能进行 add 操作");return;}b=b||{};b["path"]=b["path"]||"/";c.cookieTable[a]={"value":d,"options":b};c.response.setHeader("Set-Cookie",c.toArray());};Cookie.prototype.remove=function(b){var c=this;if(c.response==null){console.error("非 response.cookie 对象不能进行 remove 操作");return;}var a=c.get(b);if(a){a.options=a.options||{};a.options["Max-Age"]=0;c.response.setHeader("Set-Cookie",c.toArray());}};Cookie.prototype.get=function(a){var b=this;return b.cookieTable[a];};Cookie.prototype.toArray=function(){var b=this;var a=[];utils.each(b.cookieTable,function(e,c){var d=[e+"="+c.value];utils.each(c.options,function(f,g){d.push(f+"="+g);});a.push(d.join(";"));});return a;};module.exports=Cookie;