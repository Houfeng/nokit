/*csd*/(function(a){a.sourceMapOutput=function(b){this._css=[];this._rootNode=b.rootNode;this._writeSourceMap=b.writeSourceMap;this._contentsMap=b.contentsMap;this._contentsIgnoredCharsMap=b.contentsIgnoredCharsMap;this._sourceMapFilename=b.sourceMapFilename;this._outputFilename=b.outputFilename;this._sourceMapURL=b.sourceMapURL;if(b.sourceMapBasepath){this._sourceMapBasepath=b.sourceMapBasepath.replace(/\\/g,"/");}this._sourceMapRootpath=b.sourceMapRootpath;this._outputSourceFiles=b.outputSourceFiles;this._sourceMapGeneratorConstructor=b.sourceMapGenerator||require("source-map").SourceMapGenerator;if(this._sourceMapRootpath&&this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)!=="/"){this._sourceMapRootpath+="/";}this._lineNumber=0;this._column=0;};a.sourceMapOutput.prototype.normalizeFilename=function(b){b=b.replace(/\\/g,"/");if(this._sourceMapBasepath&&b.indexOf(this._sourceMapBasepath)===0){b=b.substring(this._sourceMapBasepath.length);if(b.charAt(0)==="\\"||b.charAt(0)==="/"){b=b.substring(1);}}return(this._sourceMapRootpath||"")+b;};a.sourceMapOutput.prototype.add=function(b,d,f,j){if(!b){return;}var h,l,c,k,e;if(d){var g=this._contentsMap[d.filename];if(this._contentsIgnoredCharsMap[d.filename]){f-=this._contentsIgnoredCharsMap[d.filename];if(f<0){f=0;}g=g.slice(this._contentsIgnoredCharsMap[d.filename]);}g=g.substring(0,f);l=g.split("\n");k=l[l.length-1];}h=b.split("\n");c=h[h.length-1];if(d){if(!j){this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:l.length,column:k.length},source:this.normalizeFilename(d.filename)});}else{for(e=0;e<h.length;e++){this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+e+1,column:e===0?this._column:0},original:{line:l.length+e,column:e===0?k.length:0},source:this.normalizeFilename(d.filename)});}}}if(h.length===1){this._column+=c.length;}else{this._lineNumber+=h.length-1;this._column=c.length;}this._css.push(b);};a.sourceMapOutput.prototype.isEmpty=function(){return this._css.length===0;};a.sourceMapOutput.prototype.toCSS=function(b){this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null});if(this._outputSourceFiles){for(var c in this._contentsMap){if(this._contentsMap.hasOwnProperty(c)){var d=this._contentsMap[c];if(this._contentsIgnoredCharsMap[c]){d=d.slice(this._contentsIgnoredCharsMap[c]);}this._sourceMapGenerator.setSourceContent(this.normalizeFilename(c),d);}}}this._rootNode.genCSS(b,this);if(this._css.length>0){var f,e=JSON.stringify(this._sourceMapGenerator.toJSON());if(this._sourceMapURL){f=this._sourceMapURL;}else{if(this._sourceMapFilename){f=this.normalizeFilename(this._sourceMapFilename);}}if(this._writeSourceMap){this._writeSourceMap(e);}else{f="data:application/json,"+encodeURIComponent(e);}if(f){this._css.push("/*# sourceMappingURL="+f+" */");}}return this._css.join("");};})(require("./tree"));