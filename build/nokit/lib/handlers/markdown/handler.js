/*csd*/var markdown=require("./markdown");var fs=require("fs");var Handler=module.exports=function(b){var a=this;a.server=b;a.configs=a.server.configs;};Handler.prototype.handleRequest=function(a){var b=this;if(a.request.physicalPathExists){fs.readFile(a.request.physicalPath,function(e,d){if(e){a.responseError(e);}else{var g=b.readStyle();var c=markdown.toHTML(d.toString());var f='<html>\r\n<head>\r\n<title>Markdown Preview</title>\r\n<meta charset="UTF-8"/>\r\n<style>\r\n'+g+"\r\n</style>\r\n</head>\r\n<body>\r\n"+c+"\r\n</body>\r\n</html>";a.responseContent(f,b.configs.mimeType[".html"]);}});}else{a.responseNotFound();}};Handler.prototype.readStyle=function(){var a=this;if(a.styleCache){return a.styleCache;}var b=__dirname+"/markdown.css";if(fs.existsSync(b)){a.styleCache=fs.readFileSync(b);}return a.styleCache;};